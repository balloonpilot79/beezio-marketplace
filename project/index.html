<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/bumblebee.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- Mobile Optimizations -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Beezio" />
    
    <!-- Theme Colors -->
    <meta name="theme-color" content="#d97706" />
    <meta name="msapplication-TileColor" content="#d97706" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/bumblebee.svg" />
    <link rel="apple-touch-icon" sizes="180x180" href="/bumblebee.svg" />
    
    <!-- Description for Mobile -->
    <meta name="description" content="The revolutionary affiliate marketing ecommerce platform where sellers, affiliates, and causes thrive together" />
    <meta name="keywords" content="affiliate marketing, ecommerce, sellers, fundraising, mobile commerce" />
    
    <title>Beezio - Affiliate Marketing Ecommerce Platform</title>
  </head>
  <body>
    <div id="root">
      <!-- Fallback content: will be visible if the JS bundle fails to run on mobile -->
      <div style="font-family:system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; padding:24px; max-width:720px; margin:32px auto; color:#111;">
        <h1 style="font-size:20px; margin-bottom:8px;">Beezio</h1>
        <p style="margin:0 0 12px 0; color:#333;">If this page is blank, your browser failed to run the app's JavaScript bundle.</p>
        <p style="margin:0 0 12px 0; color:#333;">Quick fixes you can try on your phone:</p>
        <ol style="margin:0 0 12px 18px; color:#333;">
          <li>Open <strong>/debug-sw</strong> (https://beezio.co/debug-sw) and use the <em>Unregister all service workers</em> button, then reload.</li>
          <li>Clear site data for beezio.co in your browser settings (Storage / Site settings → Clear data).</li>
          <li>Try loading the site in a different mobile browser or in private/incognito mode.</li>
        </ol>
        <p style="margin:0; color:#666; font-size:13px;">If that doesn't help, screenshot this message and the browser you used (Chrome/Firefox/Safari) and I'll help diagnose further.</p>
      </div>
    </div>
    <!--
      Inline script: aggressively unregister any active service workers and reload once.
      This runs before the app bundle so it helps clear stale cached bundles that can
      cause runtime errors (for example, old versions of contexts that throw when
      used before providers were added). It sets a localStorage flag so it only triggers
      a single reload to avoid reload loops.
    -->
    <script>
      (function() {
        try {
          if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
              if (registrations && registrations.length > 0 && !localStorage.getItem('beezio_sw_unregistered')) {
                console.log('Found active service workers — unregistering to clear stale caches.');
                registrations.forEach(function(r) {
                  try { r.unregister(); } catch (e) { console.warn('SW unregister error', e); }
                });
                // Mark that we've unregistered once so we don't loop.
                localStorage.setItem('beezio_sw_unregistered', '1');
                // Reload so the browser fetches the latest assets from the network.
                window.location.reload();
              }
            }).catch(function(err){
              console.warn('Error while checking service workers:', err);
            });
          }
        } catch (e) {
          console.warn('SW unregister helper failed:', e);
        }
      })();
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
